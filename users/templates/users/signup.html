{% extends "core/base.html" %}
{% load static %}
{% block body-classes %}bg-accent-red{% endblock %}
{% block content %}

    {% include 'core/components/navbar-light-transparent.html' %}


    <div class="container content mx-auto relative font-[Qanelas] flex justify-end flex-col md:flex-row md:px-20 ">

        <div class="md:mb-20 md:w-fit md:mr-32 p-5 flex flex-col justify-center items-center md:items-start">
            <div class="bg-light-gray w-full md:w-fit rounded-lg text-center px-4 pb-7 pt-7 md:pb-11 md:pt-14 md:max-w-none">
                <h2 class="font-bold text-2xl md:text-2xl mb-5 text-black-main">Давайте знакомиться!</h2>
                <form class="mb-7 w-full" method="post" action="{% url 'users:signup' %}" id="signup-form">
                    {% csrf_token %}
                    <div class="relative mb-4">
                        <input class="pl-4 py-5 md:py-4 w-full border border-[#CDCDCD] rounded-lg focus:outline-none placeholder:text-black-main text-sm md:text-base"
                               type="text" name="full_name" id="id_full_name" placeholder="Имя и Фамилия" required>
                        <div class="absolute top-1/2 left-3 transform -translate-y-1/2 flex items-center pointer-events-none">
                        </div>
                    </div>
                    <div class="relative mb-4">
                        <input class="pl-11 py-5 md:py-4 w-full border border-[#CDCDCD] rounded-lg focus:outline-none placeholder:text-black-main text-sm md:text-base"
                               type="text" name="phone_number" id="id_phone_number" value="+7 (___) ___ __ __" required>
                        <div class="absolute top-1/2 left-3 transform -translate-y-1/2 flex items-center pointer-events-none">
                            <img class="h-6 w-6" src="{% static "core/icons/kz.png" %}" alt="">
                        </div>
                    </div>
                    <div class="relative mb-4">
                        <select class="pl-11 py-5 md:py-4 w-full border border-[#CDCDCD] rounded-lg placeholder:text-black-main text-sm md:text-base appearance-none"
                                name="user_city" id="id_user_city" required>
                            <option selected value="_">Ваш город</option>
                            <option value="Astana">Астана</option>
                            <option value="Almaty">Алматы</option>
                            <option value="Shymkent">Шымкент</option>
                            <option value="Karaganda">Караганда</option>
                            <option value="Aktobe">Актобе</option>
                            <option value="Taraz">Тараз</option>
                            <option value="Pavlodar">Павлодар</option>
                            <option value="Oskemen">Оскемен</option>
                            <option value="Semey">Семей</option>
                            <option value="Atyrau">Атырау</option>
                        </select>
                        <div class="absolute top-1/2 left-3 transform -translate-y-1/2 flex items-center pointer-events-none">
                            <img class="h-6 w-6" src="{% static "core/icons/arrow-down-s-fill.svg" %}" alt="">
                        </div>
                    </div>
                    <input class="pl-4 py-5 md:py-4 w-full border border-[#CDCDCD] focus:outline-none rounded-lg mb-3 placeholder:text-black-main text-sm md:text-base"
                           type="password" name="password" id="id_password" placeholder="Пароль" required><br>
                    <input class="pl-4 py-5 md:py-4 w-full border border-[#CDCDCD] focus:outline-none rounded-lg  mb-3 placeholder:text-black-main text-sm md:text-base"
                           type="password" name="re_password" id="id_re_password" placeholder="Повторите пароль" required><br>
                    <button class="bg-accent-red rounded-lg py-5 md:py-4 font-semibold text-white text-sm md:text-base w-full"
                            type="submit">Стать частью Gasyr
                    </button>
                </form>


                <div>
                    <h4 class="text-black-main font-semibold text-base md:text-lg mb-2.5">Зарегистрироваться через соц. сети</h4>
                    <div class="flex justify-center space-x-4">
                        <a class="p-4 md:p-6 border border-gray bg-white rounded-full inline-block" href="#">
                            <img class="h-5 w-5 md:h-7 md:w-7" src="{% static "core/icons/google-icon-svgrepo-com.svg" %}" alt="">
                        </a>
                        <a class="p-4 md:p-6 border border-gray bg-white rounded-full inline-block" href="#">
                            <img class="h-5 w-5 md:h-7 md:w-7" src="{% static "core/icons/vk-svgrepo-com.svg" %}" alt="">
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="hidden md:block relative bg-no-repeat bg-top bg-cover mt-4 mb-10">
            <div class="absolute" style="background-image: url('{% static "core/images/background-stars.png" %}')"></div>
        </div>

        
        <div class="relative md:absolute md:left-24 md:-top-[50px] md:-bottom-10 md:-z-10">
            <img class="h-full" src="{% static "core/images/signup-guy.png" %}" alt="">
            <div class="absolute hidden md:block bottom-0 left-auto right-auto z-20  bg-white rounded-lg py-6 px-8 text-center mxmx-auto mb-16 md:bottom-36 md:left-36">
                <h2 class="text-lg md:text-2xl text-black-main font-bold">Халыкбердиев Якуб</h2>
                <p class="text-xs md:text-sm text-black-main font-medium">Основатель школы</p>
            </div>
            <div class="absolute md:hidden -bottom-6 left-5 right-5 z-50 bg-white rounded-lg py-6 px-5 text-center">
                <h2 class="text-[26px] md:text-2xl text-black-main font-bold">Халыкбердиев Якуб</h2>
                <p class="text-xs md:text-sm text-black-main font-medium">Основатель школы</p>
            </div>
        </div>


    </div>

    {% include "core/components/footer.html" %}

    <!-- Include jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Include Inputmask -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.5/jquery.inputmask.min.js"></script>

    <script>
        document.getElementById('id_phone_number').addEventListener('input', function (e) {
            formatPhoneNumber(e);
        });

        function formatPhoneNumber(e) {
            var input = e.target.value.replace(/[^\d]/g, ''); // Remove all non-numeric characters

            // Ensure the input starts with '7' (the country code for Kazakhstan)
            if (!input.startsWith('7')) {
                input = '7' + input;
            }

            // Limit the length to 11 digits (including the country code '7')
            input = input.substring(0, 11);

            var formattedInput = '+7 ('; // Start with the country code and opening parenthesis

            // Remove the country code ('7') and then format the rest
            input = input.substring(1); // Remove the '7' to start formatting

            // Dynamically add formatting based on the current length of the input
            for (var i = 0; i < input.length; i++) {
                if (i === 3) {
                    formattedInput += ') '; // Close the parenthesis after the area code
                } else if (i === 6 || i === 8) {
                    formattedInput += ' - '; // Add dashes after the 6th and 8th digits
                }
                formattedInput += input[i];
            }

            // Update the input field with the dynamically formatted value
            e.target.value = formattedInput;
        }
    </script>

{% endblock %}